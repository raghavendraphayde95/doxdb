<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-10-06 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>DoxDB &#x2013; Architecture</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <meta name="Date-Revision-yyyymmdd" content="20151006" />
    <meta http-equiv="Content-Language" content="en" />
        
          <!-- Google Analytics -->
    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32387215-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    </head>
  <body class="page page-template-default full-width custom-background header-image singular customize-support">
    <div id="page" class="hfeed site">
    <div id="site-header">
                          <a href="http://www.trajano.net/" id="bannerLeft" title="Trajano">
                                        <img src="http://www.trajano.net/wp-content/uploads/2014/01/logo-blog-twentyfourteen1.png" alt="Trajano" />
                </a>
          </div>
    <header id="masthead" class="site-header" role="banner">
      <div class="header-main">
        <h1 class="site-title"><a href="http://site.trajano.net/doxdb/" rel="home">DoxDB</a></h1>
        <nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
          <ul class="nav-menu">
                  <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../trajano/" title="Organizational POM">Organizational POM</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../coding-standards/" title="Coding standards">Coding standards</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../commons-testing/" title="Commons testing">Commons testing</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../java-archetype/" title="Java archetype">Java archetype</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="http://www.trajano.net/open-source-projects/" class="externalLink" title="Other projects">Other projects</a>
      </li>
            </ul>
        </nav>
      </div>
    </header>
    <div id="main" class="site-main">
      <div id="main-content" class="main-content">
        <div id="primary" class="content-area">
	  <div id="content" class="site-content" role="main">
	    <article class="page type-page status-publish hentry">
	      <div class="entry-content">
                <h1>Architecture</h1>
<p>The document is a first class citizen and the underlying database is secondary and can be rebuilt using the documents. This is how applications such as Mail.app and WinAMP function, where an internal database is created out of meta-data that can be gathered from the documents.</p>
<p>The documents for doxdb are structured XML files conforming to an XML schema. XML document was chosen over JSON in that there are established standards for schema and transformation (XSLT). Should mapping be needed.</p>
<p>Storage files are kept in MIME multipart message format. This allows adding additional meta data without changing the structure and allows for the document content to be stored as is.</p>
<div class="section">
<h2><a name="JPA_vs_JDBC"></a>JPA vs JDBC</h2>
<p>The implementation of this has jumped from JPA to JDBC back to JPA. Although JDBC provides a lot of low level functionality and provides us with more performant functions, it does not work when working with different database vendors.</p>
<p>In addition, although JPA can still function with JDBC, by leveraging the JPA entity caches we can get some performance gain without additional code.</p>
<p>From searching the web for information on whether several small tables are better vs. one large table with a discriminator field, it appears that the larger majority of articles I see indicate one large table that is properly indexed would yield a better job. </p></div>
<div class="section">
<h2><a name="Comparison_with_other_data_stores"></a>Comparison with other data stores</h2>

<ul>
  
<li>
<p>Unlike most other systems that try to <i>own</i> your data store such as MongoDB, HBase or Lotus Notes, this system relies on JDBC to perform operations with existing established RDBMS database infrastructures. For most larger enterprises, database management procedures would&#x2019;ve been established long ago and would be cost prohibitive to move or train to migrate data over to other systems.</p></li>
  
<li>
<p>Since this is running on top of JDBC, it will allow itself to partake in existing ACID transactions including XA support for more complex applications.</p></li>
</ul></div>
<div class="section">
<h2><a name="Comparison_with_ORM_frameworks"></a>Comparison with ORM frameworks</h2>

<ul>
  
<li>
<p>doxdb is <i>not</i> an ORM framework. An ORM framework by definition maps an object to a relational database structure. doxdb does not perform any mapping and in fact prescribes a specific schema for the tables.</p></li>
  
<li>
<p>doxdb does <i>not</i> provide any query capability, everything is looked up by keys, but does interface with ElasticSearch as a search provider until a Java EE standard has added support for doing search and indexing.</p></li>
  
<li>
<p>Not everything is in the database. Databases are not well known for fast retrieval of large LOB data and doxdb allows the use of a file system to store <a class="externalLink" href="http://en.wikipedia.org/wiki/Out-of-band">Out of Band Data</a> retrieval.</p></li>
</ul></div>
<div class="section">
<h2><a name="Security"></a>Security</h2>
<p>There is an implicit trust for the database and file system as such the data stored is not encrypted by the module.</p>
<p>Primary keys are not exposed outside the internal implementation.<br />Although everything is looked up by ID, the IDs are NOT exposed on the REST API, though within the EJB API tier it is still exposed to allow interop with other application components.</p></div>
<div class="section">
<h2><a name="Search"></a>Search</h2>
<p><i>Originally</i> Lucene was chosen as the search engine over Solr or <a class="externalLink" href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a> primarily because of its low memory footprint. The primary use case for doxdb is millions of documents rather than billions. That being said, the API is built so that search can be plugged into a different technology if needed until a Java EE standard for search comes up.</p>
<p>However, Lucene on its own does not support a distributed environment and was causing locking issues under load. As such <a class="externalLink" href="https://www.elastic.co/products/elasticsearch">ElasticSearch</a> was chosen to handle the searching.</p></div>
	      </div>
	    </article>
	  </div>
        </div>
      </div>
      <div id="secondary">
        <h2 class="site-description">
                
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-10-06</span>
                   <br /> <span id="projectVersion">Version: 1.0.5-SNAPSHOT</span>
                      </div>
      	</h2>
        <div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">
                <aside class="widget">
            </aside>
      <aside class="widget">
                 <h1 class="widget-title">Overview</h1>
                  <ul>
                      <li class="none">
                          <a href="index.html" title="About">About</a>
            </li>
          </ul>
        </aside>
      <aside class="widget">
                 <h1 class="widget-title">Modules</h1>
                  <ul>
                      <li class="none">
                          <a href="doxdb-rest/index.html" title="DoxDB REST API">DoxDB REST API</a>
            </li>
                      <li class="none">
                          <a href="doxdb-sample/index.html" title="DoxDB Sample Application">DoxDB Sample Application</a>
            </li>
                      <li class="none">
                          <a href="doxdb-sample-web/index.html" title="DoxDB Sample Web Application">DoxDB Sample Web Application</a>
            </li>
                      <li class="none">
                          <a href="json-path/index.html" title="JSON Path">JSON Path</a>
            </li>
          </ul>
        </aside>
      <aside class="widget">
                 <h1 class="widget-title">Project Documentation</h1>
                  <ul>
                                                                                                                                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                    <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
        </aside>
          </div>
      </div>
    </div>
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info">
                  Copyright &#169;                    2015
                        <a href="http://www.trajano.net/">Trajano</a>.
            All rights reserved.      
                    
                    </div>
    </footer>
    </div>
  </body>
</html>

