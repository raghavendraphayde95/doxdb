<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-08-30 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>DoxDB REST API &#x2013; DoxDB REST API</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <meta name="Date-Revision-yyyymmdd" content="20150830" />
    <meta http-equiv="Content-Language" content="en" />
        
          <!-- Google Analytics -->
    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32387215-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    </head>
  <body class="page page-template-default full-width custom-background header-image singular customize-support">
    <div id="page" class="hfeed site">
    <div id="site-header">
                          <a href="http://www.trajano.net/" id="bannerLeft" title="Trajano">
                                        <img src="http://www.trajano.net/wp-content/uploads/2014/01/logo-blog-twentyfourteen1.png" alt="Trajano" />
                </a>
          </div>
    <header id="masthead" class="site-header" role="banner">
      <div class="header-main">
        <h1 class="site-title"><a href="http://site.trajano.net/doxdb/doxdb-rest/" rel="home">DoxDB REST API</a></h1>
        <nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
          <ul class="nav-menu">
                  <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../../trajano/" title="Organizational POM">Organizational POM</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../../coding-standards/" title="Coding standards">Coding standards</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../../commons-testing/" title="Commons testing">Commons testing</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="../../java-archetype/" title="Java archetype">Java archetype</a>
      </li>
      <li class="menu-item menu-item-type-post_type menu-item-object-page page_item">
                    <a href="http://www.trajano.net/open-source-projects/" class="externalLink" title="Other projects">Other projects</a>
      </li>
            </ul>
        </nav>
      </div>
    </header>
    <div id="main" class="site-main">
      <div id="main-content" class="main-content">
        <div id="primary" class="content-area">
	  <div id="content" class="site-content" role="main">
	    <article class="page type-page status-publish hentry">
	      <div class="entry-content">
                <h1>DoxDB REST API</h1>
<p>This module provides the REST API and its implementation as a web fragment for <a class="externalLink" href="http://site.trajano.net/doxdb/">DoxDB</a>.</p>
<p>For DoxDB to work, the dependency is required to enable access to the REST API and JPA entities. </p>

<div class="source">
<div class="source">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;net.trajano.doxdb&lt;/groupId&gt;
  &lt;artifactId&gt;doxdb-rest&lt;/artifactId&gt;
  &lt;groupId&gt;1.0.3-SNAPSHOT&lt;/groupId&gt;
&lt;/dependency&gt;
</pre></div></div>
<p>In addition <tt>src/main/META-INF/persistence.xml</tt> and the DoxDB JPA entity classes. Though <tt>jar-file</tt> can also be used, it can cause problems with some IDEs specifically Eclipse, by avoiding it we avoid the errors associated with it and be able to enable JPA support on the IDE. </p>

<div class="source">
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  version=&quot;2.1&quot;&gt;
  &lt;persistence-unit name=&quot;default&quot;&gt;
    &lt;class&gt;net.trajano.doxdb.Dox&lt;/class&gt;
    &lt;class&gt;net.trajano.doxdb.DoxMeta&lt;/class&gt;
    &lt;class&gt;net.trajano.doxdb.DoxOob&lt;/class&gt;
    &lt;class&gt;net.trajano.doxdb.DoxOobTombstone&lt;/class&gt;
    &lt;class&gt;net.trajano.doxdb.DoxTombstone&lt;/class&gt;
    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre></div></div>
<p><a class="externalLink" href="https://www.elastic.co/products/elasticsearch">ElasticSearch</a> is needed in order to provide search capabilities to <a class="externalLink" href="http://site.trajano.net/doxdb/">DoxDB</a></p>
<p>To set up the JAX-RS endpoint, a <tt>src/main/webapp/WEB-INF/web.xml</tt> file is required to have the <tt>&lt;servlet&gt;</tt> and <tt>&lt;servlet-mapping&gt;</tt> to <tt>net.trajano.doxdb.rest.DoxRestApplication</tt>. In this example <tt>/V1/*</tt> is the root application path, but it can be customized for your application branding requirements.</p>

<div class="source">
<div class="source">
<pre>&lt;web-app&gt;
   &lt;servlet&gt;
       &lt;servlet-name&gt;net.trajano.doxdb.rest.DoxRestApplication&lt;/servlet-name&gt;
   &lt;/servlet&gt;

   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;net.trajano.doxdb.rest.DoxRestApplication&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/V1/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt; 
</pre></div></div>
<p>The following interfaces need to be implemented as <tt>@Local</tt> <tt>@Stateless</tt> EJBs in your application. </p>

<ul>
  
<li>net.trajano.doxdb.ext.CollectionAccessControl</li>
  
<li>net.trajano.doxdb.ext.ConfigurationProvider</li>
  
<li>net.trajano.doxdb.ext.EventHandler</li>
  
<li>net.trajano.doxdb.ext.Indexer</li>
  
<li>net.trajano.doxdb.ext.Migrator</li>
</ul>
<p><tt>META-INF/dox.xml</tt> provides a way of describing your DoxDB instance through XML. To use the <tt>META-INF/dox.xml</tt> file extend <tt>net.trajano.doxdb.ext.XmlConfigurationProvider</tt> which implements <tt>net.trajano.doxdb.ext.ConfigurationProvider</tt> as a <tt>@Local</tt> <tt>@Stateless</tt> EJB with no overrides.</p>

<div class="source">
<div class="source">
<pre>@Stateless
@Local(net.trajano.doxdb.ext.ConfigurationProvider.class)
public class MyConfigurationProvider extends XmlConfigurationProvider {
}
</pre></div></div>
<p>This can be done by adding a <tt>src/main/resources/META-INF/orm.xml</tt> and defining the new schema or entity table mappings there.</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;entity-mappings xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm
        http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd&quot;
  version=&quot;2.1&quot;&gt;
  &lt;persistence-unit-metadata&gt;
    &lt;persistence-unit-defaults&gt;
      &lt;schema&gt;schema21&lt;/schema&gt;
    &lt;/persistence-unit-defaults&gt;
  &lt;/persistence-unit-metadata&gt;
  &lt;entity class=&quot;net.trajano.doxdb.ejb.DoxTombstone&quot;&gt;
    &lt;table name=&quot;Tombstone2&quot; /&gt;
  &lt;/entity&gt;
&lt;/entity-mappings&gt;
</pre></div></div>
	      </div>
	    </article>
	  </div>
        </div>
      </div>
      <div id="secondary">
        <h2 class="site-description">
                
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-08-30</span>
                   <br /> <span id="projectVersion">Version: 1.0.3-SNAPSHOT</span>
                      </div>
      	</h2>
        <div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">
                <aside class="widget">
            </aside>
      <aside class="widget">
            </aside>
      <aside class="widget">
            </aside>
      <aside class="widget">
                 <h1 class="widget-title">Overview</h1>
                  <ul>
                      <li class="none">
            <strong>About</strong>
          </li>
          </ul>
        </aside>
      <aside class="widget">
                 <h1 class="widget-title">Parent Project</h1>
                  <ul>
                      <li class="none">
                          <a href="../index.html" title="DoxDB">DoxDB</a>
            </li>
          </ul>
        </aside>
      <aside class="widget">
            </aside>
      <aside class="widget">
                 <h1 class="widget-title">Project Documentation</h1>
                  <ul>
                                                                                                                                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                                <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
        </aside>
          </div>
      </div>
    </div>
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info">
                  Copyright &#169;                    2015
                        <a href="http://www.trajano.net/">Trajano</a>.
            All rights reserved.      
                    
                    </div>
    </footer>
    </div>
  </body>
</html>

